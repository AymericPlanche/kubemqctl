# github.com/go-task/task

version: '2'

vars:
  BINARY_NAME: kubetools
  VERSION: v0.1.0

tasks:
  default:
    cmds:
      - task: build_win
      - task: build_mac
      - task: build_linux_64
      - task: build_linux_32
  build_win:
    env:
      GOOS: windows
      GOARCH: amd64
    cmds:
      - go build -o "{{.BINARY_NAME}}.exe" -ldflags "-X main.version={{.VERSION}}"
      - go build -o "./bin/windows/{{.BINARY_NAME}}.exe" -ldflags "-X main.version={{.VERSION}}"
  build_mac:
    env:
      GOOS: darwin
      GOARCH: amd64
    cmds:
      - go build -o "./bin/macos/{{.BINARY_NAME}}" -ldflags "-X main.version={{.VERSION}}"
  build_linux_64:
    env:
      GOOS: linux
      GOARCH: amd64
    cmds:
      - go build -o "./bin/linux64/{{.BINARY_NAME}}" -ldflags "-X main.version={{.VERSION}}"
  build_linux_32:
    env:
      GOOS: linux
      GOARCH: 386
    cmds:
      - go build -o "./bin/linux32/{{.BINARY_NAME}}" -ldflags "-X main.version={{.VERSION}}"